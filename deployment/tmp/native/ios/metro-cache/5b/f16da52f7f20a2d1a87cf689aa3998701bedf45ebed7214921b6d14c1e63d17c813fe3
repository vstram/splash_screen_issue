{"dependencies":[{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":340,"column":0,"index":9743}}],"key":"EU+qeBIKi4KcIzPeK4PbkLqFqVY="}},{"name":"@babel/runtime/helpers/classCallCheck","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":340,"column":0,"index":9743}}],"key":"ohGilxjVqjyE1GooDVDt9OYg9x0="}},{"name":"@babel/runtime/helpers/createClass","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":340,"column":0,"index":9743}}],"key":"V6GYoXnblvuuGHJNMy7MHyaunsU="}},{"name":"invariant","data":{"asyncType":null,"locs":[{"start":{"line":13,"column":18,"index":248},"end":{"line":13,"column":38,"index":268}}],"key":"Fzi/BpZws2YooIGJ9b6u0HJtuks="}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=r(d[1]),s=r(d[2]),o=r(d[3]),l=(function(){function l(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{viewAreaCoveragePercentThreshold:0};n(this,l),this._hasInteracted=!1,this._timers=new Set,this._viewableIndices=[],this._viewableItems=new Map,this._config=t}return s(l,[{key:\"dispose\",value:function(){this._timers.forEach(clearTimeout)}},{key:\"computeViewableItems\",value:function(t,n,s,l,h){var u=this._config,v=u.itemVisiblePercentThreshold,f=u.viewAreaCoveragePercentThreshold,_=null!=f,w=_?f:v;o(null!=w&&null!=v!=(null!=f),'Must set exactly one of itemVisiblePercentThreshold or viewAreaCoveragePercentThreshold');var b=[];if(0===t)return b;var I=-1,y=h||{first:0,last:t-1},p=y.first,T=y.last;if(T>=t)return console.warn('Invalid render range computing viewability '+JSON.stringify({renderRange:h,itemCount:t})),[];for(var k=p;k<=T;k++){var V=l(k);if(V){var M=V.offset-n,C=M+V.length;if(M<s&&C>0)I=k,c(_,w,M,C,s,V.length)&&b.push(k);else if(I>=0)break}}return b}},{key:\"onUpdate\",value:function(t,n,s,o,l,c,h){var u=this;if((!this._config.waitForInteraction||this._hasInteracted)&&0!==t&&o(0)){var v=[];if(t&&(v=this.computeViewableItems(t,n,s,o,h)),this._viewableIndices.length!==v.length||!this._viewableIndices.every(function(t,n){return t===v[n]}))if(this._viewableIndices=v,this._config.minimumViewTime){var f=setTimeout(function(){u._timers.delete(f),u._onUpdateSync(v,c,l)},this._config.minimumViewTime);this._timers.add(f)}else this._onUpdateSync(v,c,l)}}},{key:\"resetViewableIndices\",value:function(){this._viewableIndices=[]}},{key:\"recordInteraction\",value:function(){this._hasInteracted=!0}},{key:\"_onUpdateSync\",value:function(n,s,o){var l=this;n=n.filter(function(t){return l._viewableIndices.includes(t)});var c=this._viewableItems,h=new Map(n.map(function(t){var n=o(t,!0);return[n.key,n]})),u=[];for(var v of h){var f=t(v,2),_=f[0],w=f[1];c.has(_)||u.push(w)}for(var b of c){var I=t(b,2),y=I[0],p=I[1];h.has(y)||u.push(Object.assign({},p,{isViewable:!1}))}u.length>0&&(this._viewableItems=h,s({viewableItems:Array.from(h.values()),changed:u,viewabilityConfig:this._config}))}}]),l})();function c(t,n,s,o,l,c){if(u(s,o,l))return!0;var v=h(s,o,l);return 100*(t?v/l:v/c)>=n}function h(t,n,s){var o=Math.min(n,s)-Math.max(t,0);return Math.max(0,o)}function u(t,n,s){return t>=0&&n<=s&&n>t}m.exports=l});","lineCount":1,"map":[[1,28,11,0],[1,41,11,13],[1,45,11,13,"_slicedToArray"],[1,47,11,13,"r"],[1,49,11,13,"d"],[1,51,11,13],[1,55,11,13,"_classCallCheck"],[1,57,11,13,"r"],[1,59,11,13,"d"],[1,61,11,13],[1,65,11,13,"_createClass"],[1,67,11,13,"r"],[1,69,11,13,"d"],[1,71,11,13],[1,75,13,6,"invariant"],[1,77,13,18,"require"],[1,79,13,25,"d"],[1,81,13,25],[1,85,75,6,"ViewabilityHelper"],[1,88,75,23],[1,99,82,2],[1,108,82,2,"ViewabilityHelper"],[1,112,84,4],[1,116,83,4,"config"],[1,118,83,29,"arguments"],[1,128,83,29,"length"],[1,135,83,29],[1,143,83,29,"undefined"],[1,147,83,29,"arguments"],[1,157,83,29],[1,160,83,29,"arguments"],[1,170,83,29],[1,174,83,33,"viewAreaCoveragePercentThreshold"],[1,207,83,67],[1,210,83,69,"_classCallCheck"],[1,212,83,69,"this"],[1,217,83,69,"ViewabilityHelper"],[1,220,83,69,"this"],[1,225,77,2,"_hasInteracted"],[1,241,77,28],[1,243,77,33,"this"],[1,248,78,2,"_timers"],[1,256,78,25],[1,260,78,29,"Set"],[1,264,78,34,"this"],[1,269,79,2,"_viewableIndices"],[1,289,79,38,"this"],[1,294,80,2,"_viewableItems"],[1,309,80,43],[1,313,80,47,"Map"],[1,317,85,4,"this"],[1,322,85,9,"_config"],[1,330,85,19,"config"],[1,332,301,3],[1,339,86,3,"_createClass"],[1,341,86,3,"ViewabilityHelper"],[1,345,86,3,"key"],[1,349,86,3],[1,359,86,3,"value"],[1,365,91,2],[1,376,95,4,"this"],[1,381,95,9,"_timers"],[1,389,95,17,"forEach"],[1,397,95,25,"clearTimeout"],[1,414,96,3,"key"],[1,418,96,3],[1,441,96,3,"value"],[1,447,101,2],[1,456,102,4,"itemCount"],[1,458,103,4,"scrollOffset"],[1,460,104,4,"viewportHeight"],[1,462,105,4,"getFrameMetrics"],[1,464,111,4,"renderRange"],[1,467,117,4],[1,471,117,4,"_this$_config"],[1,473,118,6,"this"],[1,478,118,11,"_config"],[1,486,117,11,"itemVisiblePercentThreshold"],[1,488,117,38,"_this$_config"],[1,490,117,11,"itemVisiblePercentThreshold"],[1,518,117,40,"viewAreaCoveragePercentThreshold"],[1,520,117,72,"_this$_config"],[1,522,117,40,"viewAreaCoveragePercentThreshold"],[1,555,119,10,"viewAreaMode"],[1,557,119,61],[1,563,119,25,"viewAreaCoveragePercentThreshold"],[1,565,120,10,"viewablePercentThreshold"],[1,567,120,37,"viewAreaMode"],[1,569,121,8,"viewAreaCoveragePercentThreshold"],[1,571,122,8,"itemVisiblePercentThreshold"],[1,573,123,4,"invariant"],[1,575,124,34],[1,581,124,6,"viewablePercentThreshold"],[1,584,125,40],[1,590,125,9,"itemVisiblePercentThreshold"],[1,594,126,47],[1,600,126,11,"viewAreaCoveragePercentThreshold"],[1,603,127,6],[1,694,129,4],[1,698,129,10,"viewableIndices"],[1,703,130,4],[1,706,130,22],[1,710,130,8,"itemCount"],[1,712,131,6],[1,719,131,13,"viewableIndices"],[1,721,133,4],[1,725,133,8,"firstVisible"],[1,728,133,20],[1,730,134,4,"_ref"],[1,732,134,26,"renderRange"],[1,736,134,42,"first"],[1,742,134,49],[1,744,134,52,"last"],[1,749,134,58,"itemCount"],[1,751,134,70],[1,754,134,11,"first"],[1,756,134,16,"_ref"],[1,758,134,11,"first"],[1,764,134,18,"last"],[1,766,134,22,"_ref"],[1,768,134,18,"last"],[1,773,135,4],[1,776,135,8,"last"],[1,779,135,16,"itemCount"],[1,781,140,6],[1,788,136,6,"console"],[1,796,136,14,"warn"],[1,801,137,8],[1,847,138,10,"JSON"],[1,852,138,15,"stringify"],[1,863,138,26,"renderRange"],[1,875,138,26,"renderRange"],[1,877,138,39,"itemCount"],[1,887,138,39,"itemCount"],[1,895,142,4],[1,899,142,9],[1,903,142,13,"idx"],[1,905,142,19,"first"],[1,907,142,26,"idx"],[1,910,142,33,"last"],[1,912,142,39,"idx"],[1,916,142,46],[1,917,143,6],[1,921,143,12,"metrics"],[1,923,143,22,"getFrameMetrics"],[1,925,143,38,"idx"],[1,928,144,6],[1,931,144,11,"metrics"],[1,933,144,6],[1,934,147,6],[1,938,147,12,"top"],[1,940,147,18,"metrics"],[1,942,147,26,"offset"],[1,949,147,35,"scrollOffset"],[1,951,148,12,"bottom"],[1,953,148,21,"top"],[1,955,148,27,"metrics"],[1,957,148,35,"length"],[1,964,149,6],[1,967,149,10,"top"],[1,969,149,16,"viewportHeight"],[1,972,149,34,"bottom"],[1,974,149,43],[1,976,150,8,"firstVisible"],[1,978,150,23,"idx"],[1,980,152,10,"_isViewable"],[1,982,153,12,"viewAreaMode"],[1,984,154,12,"viewablePercentThreshold"],[1,986,155,12,"top"],[1,988,156,12,"bottom"],[1,990,157,12,"viewportHeight"],[1,992,158,12,"metrics"],[1,994,158,20,"length"],[1,1003,161,10,"viewableIndices"],[1,1005,161,26,"push"],[1,1010,161,31,"idx"],[1,1018,163,13],[1,1021,163,17,"firstVisible"],[1,1024,163,33],[1,1026,164,8],[1,1033,167,4],[1,1040,167,11,"viewableIndices"],[1,1045,168,3,"key"],[1,1049,168,3],[1,1060,168,3,"value"],[1,1066,174,2],[1,1075,175,4,"itemCount"],[1,1077,176,4,"scrollOffset"],[1,1079,177,4,"viewportHeight"],[1,1081,178,4,"getFrameMetrics"],[1,1083,183,4,"createViewToken"],[1,1085,184,4,"onViewableItemsChanged"],[1,1087,190,4,"renderRange"],[1,1090,195,10],[1,1094,195,10,"_this"],[1,1096,195,10,"this"],[1,1101,196,4],[1,1106,197,7,"this"],[1,1111,197,12,"_config"],[1,1119,197,20,"waitForInteraction"],[1,1139,197,43,"this"],[1,1144,197,48,"_hasInteracted"],[1,1161,198,20],[1,1165,198,6,"itemCount"],[1,1168,199,7,"getFrameMetrics"],[1,1170,199,23],[1,1173,196,4],[1,1174,203,4],[1,1178,203,8,"viewableIndices"],[1,1183,213,4],[1,1186,204,8,"itemCount"],[1,1190,205,6,"viewableIndices"],[1,1192,205,24,"this"],[1,1197,205,29,"computeViewableItems"],[1,1218,206,8,"itemCount"],[1,1220,207,8,"scrollOffset"],[1,1222,208,8,"viewportHeight"],[1,1224,209,8,"getFrameMetrics"],[1,1226,210,8,"renderRange"],[1,1230,214,6,"this"],[1,1235,214,11,"_viewableIndices"],[1,1252,214,28,"length"],[1,1261,214,39,"viewableIndices"],[1,1263,214,55,"length"],[1,1272,215,6,"this"],[1,1277,215,11,"_viewableIndices"],[1,1294,215,28,"every"],[1,1300,215,34],[1,1309,215,35,"v"],[1,1311,215,38,"ii"],[1,1314,215,40],[1,1321,215,45,"v"],[1,1325,215,51,"viewableIndices"],[1,1327,215,67,"ii"],[1,1332,222,4],[1,1335,221,4,"this"],[1,1340,221,9,"_viewableIndices"],[1,1357,221,28,"viewableIndices"],[1,1359,222,8,"this"],[1,1364,222,13,"_config"],[1,1372,222,21,"minimumViewTime"],[1,1388,222,38],[1,1389,223,6],[1,1393,223,12,"handle"],[1,1395,223,21,"setTimeout"],[1,1406,223,32],[1,1417,227,8,"_this"],[1,1419,227,13,"_timers"],[1,1427,227,21,"delete"],[1,1434,227,28,"handle"],[1,1437,228,8,"_this"],[1,1439,228,13,"_onUpdateSync"],[1,1453,229,10,"viewableIndices"],[1,1455,230,10,"onViewableItemsChanged"],[1,1457,231,10,"createViewToken"],[1,1461,233,9,"this"],[1,1466,233,14,"_config"],[1,1474,233,22,"minimumViewTime"],[1,1491,237,6,"this"],[1,1496,237,11,"_timers"],[1,1504,237,19,"add"],[1,1508,237,23,"handle"],[1,1516,239,6,"this"],[1,1521,239,11,"_onUpdateSync"],[1,1535,240,8,"viewableIndices"],[1,1537,241,8,"onViewableItemsChanged"],[1,1539,242,8,"createViewToken"],[1,1546,245,3,"key"],[1,1550,245,3],[1,1573,245,3,"value"],[1,1579,250,2],[1,1590,251,4,"this"],[1,1595,251,9,"_viewableIndices"],[1,1618,252,3,"key"],[1,1622,252,3],[1,1642,252,3,"value"],[1,1648,257,2],[1,1659,258,4,"this"],[1,1664,258,9,"_hasInteracted"],[1,1680,258,26],[1,1685,259,3,"key"],[1,1689,259,3],[1,1705,259,3,"value"],[1,1711,261,2],[1,1720,262,4,"viewableIndicesToCheck"],[1,1722,263,4,"onViewableItemsChanged"],[1,1724,268,4,"createViewToken"],[1,1727,269,4],[1,1731,269,4,"_this2"],[1,1733,269,4,"this"],[1,1738,271,4,"viewableIndicesToCheck"],[1,1740,271,29,"viewableIndicesToCheck"],[1,1742,271,52,"filter"],[1,1749,271,59],[1,1758,271,59,"ii"],[1,1761,271,61],[1,1768,272,6,"_this2"],[1,1770,272,11,"_viewableIndices"],[1,1787,272,28,"includes"],[1,1796,272,37,"ii"],[1,1801,274,4],[1,1805,274,10,"prevItems"],[1,1807,274,22,"this"],[1,1812,274,27,"_viewableItems"],[1,1827,275,10,"nextItems"],[1,1829,275,22],[1,1833,275,26,"Map"],[1,1837,276,6,"viewableIndicesToCheck"],[1,1839,276,29,"map"],[1,1843,276,33],[1,1852,276,33,"ii"],[1,1855,277,8],[1,1859,277,14,"viewable"],[1,1861,277,25,"createViewToken"],[1,1863,277,41,"ii"],[1,1866,277,45],[1,1869,278,8],[1,1876,278,16,"viewable"],[1,1878,278,25,"key"],[1,1882,278,30,"viewable"],[1,1888,282,10,"changed"],[1,1893,283,4],[1,1897,283,4],[1,1901,283,4,"_ref2"],[1,1906,283,34,"nextItems"],[1,1908,283,45],[1,1909,283,45],[1,1913,283,45,"_ref3"],[1,1915,283,45,"_slicedToArray"],[1,1917,283,45,"_ref2"],[1,1919,283,45],[1,1922,283,16,"key"],[1,1924,283,19,"_ref3"],[1,1926,283,19],[1,1929,283,21,"viewable"],[1,1931,283,29,"_ref3"],[1,1933,283,29],[1,1936,284,11,"prevItems"],[1,1938,284,21,"has"],[1,1942,284,25,"key"],[1,1946,285,8,"changed"],[1,1948,285,16,"push"],[1,1953,285,21,"viewable"],[1,1956,288,4],[1,1960,288,4],[1,1964,288,4,"_ref4"],[1,1969,288,34,"prevItems"],[1,1971,288,45],[1,1972,288,45],[1,1976,288,45,"_ref5"],[1,1978,288,45,"_slicedToArray"],[1,1980,288,45,"_ref4"],[1,1982,288,45],[1,1985,288,16,"key"],[1,1987,288,19,"_ref5"],[1,1989,288,19],[1,1992,288,21,"viewable"],[1,1994,288,29,"_ref5"],[1,1996,288,29],[1,1999,289,11,"nextItems"],[1,2001,289,21,"has"],[1,2005,289,25,"key"],[1,2009,290,8,"changed"],[1,2011,290,16,"push"],[1,2016,290,20,"Object"],[1,2023,290,20,"assign"],[1,2033,290,25,"viewable"],[1,2036,290,35,"isViewable"],[1,2048,290,47],[1,2053,293,8,"changed"],[1,2055,293,16,"length"],[1,2062,293,25],[1,2066,294,6,"this"],[1,2071,294,11,"_viewableItems"],[1,2086,294,28,"nextItems"],[1,2088,295,6,"onViewableItemsChanged"],[1,2091,296,8,"viewableItems"],[1,2105,296,23,"Array"],[1,2111,296,29,"from"],[1,2116,296,34,"nextItems"],[1,2118,296,44,"values"],[1,2128,297,8,"changed"],[1,2136,297,8,"changed"],[1,2138,298,8,"viewabilityConfig"],[1,2156,298,27,"this"],[1,2161,298,32,"_config"],[1,2176,301,3,"ViewabilityHelper"],[1,2179,75,23],[1,2182,304,0],[1,2191,304,9,"_isViewable"],[1,2193,305,2,"viewAreaMode"],[1,2195,306,2,"viewablePercentThreshold"],[1,2197,307,2,"top"],[1,2199,308,2,"bottom"],[1,2201,309,2,"viewportHeight"],[1,2203,310,2,"itemLength"],[1,2206,312,2],[1,2209,312,6,"_isEntirelyVisible"],[1,2211,312,25,"top"],[1,2213,312,30,"bottom"],[1,2215,312,38,"viewportHeight"],[1,2218,313,4],[1,2225,313,11],[1,2227,315,4],[1,2231,315,10,"pixels"],[1,2233,315,19,"_getPixelsVisible"],[1,2235,315,37,"top"],[1,2237,315,42,"bottom"],[1,2239,315,50,"viewportHeight"],[1,2242,318,4],[1,2249,317,6],[1,2254,317,13,"viewAreaMode"],[1,2256,317,28,"pixels"],[1,2258,317,37,"viewportHeight"],[1,2260,317,54,"pixels"],[1,2262,317,63,"itemLength"],[1,2266,318,22,"viewablePercentThreshold"],[1,2268,322,0],[1,2277,322,9,"_getPixelsVisible"],[1,2279,323,2,"top"],[1,2281,324,2,"bottom"],[1,2283,325,2,"viewportHeight"],[1,2286,327,2],[1,2290,327,8,"visibleHeight"],[1,2292,327,24,"Math"],[1,2297,327,29,"min"],[1,2301,327,33,"bottom"],[1,2303,327,41,"viewportHeight"],[1,2306,327,59,"Math"],[1,2311,327,64,"max"],[1,2315,327,68,"top"],[1,2317,327,73],[1,2320,328,2],[1,2327,328,9,"Math"],[1,2332,328,14,"max"],[1,2336,328,18],[1,2338,328,21,"visibleHeight"],[1,2341,331,0],[1,2350,331,9,"_isEntirelyVisible"],[1,2352,332,2,"top"],[1,2354,333,2,"bottom"],[1,2356,334,2,"viewportHeight"],[1,2359,336,2],[1,2366,336,9,"top"],[1,2369,336,16],[1,2372,336,21,"bottom"],[1,2375,336,31,"viewportHeight"],[1,2378,336,49,"bottom"],[1,2380,336,58,"top"],[1,2382,339,0,"module"],[1,2384,339,7,"exports"],[1,2392,339,17,"ViewabilityHelper"]],"functionMap":{"names":["<global>","ViewabilityHelper","constructor","dispose","computeViewableItems","onUpdate","_viewableIndices.every$argument_0","setTimeout$argument_0","resetViewableIndices","recordInteraction","_onUpdateSync","viewableIndicesToCheck.filter$argument_0","viewableIndicesToCheck.map$argument_0","_isViewable","_getPixelsVisible","_isEntirelyVisible"],"mappings":"AAA;AC0E;ECO;GDI;EEK;GFK;EGK;GHmE;EIM;kCCyC,oCD;gCEQ;OFU;GJY;EOK;GPE;EQK;GRE;ESE;2DCU;wCDC;iCEI;OFG;GTsB;CDC;AaE;CbgB;AcE;CdO;AeE;CfM"}},"type":"js/module"}]}